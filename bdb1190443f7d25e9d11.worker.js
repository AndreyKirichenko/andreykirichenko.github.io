!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/6;return e*Math.tan(t)}},{key:"toFrontalCoords",value:function(t,n){return{x:t-n,y:e.getY(t)+e.getY(n)}}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};o(i,"getRandomPropertyName",function(e){var t=Object.keys(e);return i.getRandomArrayItem(t)}),o(i,"getRandomArrayItem",function(e){return e[i.getRandomArrayIndex(e)]}),o(i,"getRandomArrayIndex",function(e){return Math.floor(e.length*Math.random())}),o(i,"getRandomBool",function(){return i.getRandomArrayItem([!0,!1])}),o(i,"getRandomBoolByChance",function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=[],n=0,a=0;a<100;a++)n<e?(t.push(!0),n+=1):t.push(!1);return i.getRandomArrayItem(t)});var l=i;function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=new(function(){function e(){var t,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a={fields:{}},(n="cached")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}var t,n,a;return t=e,(n=[{key:"cloud",value:function(e){for(var t=e.width,n=e.height,a=e.leftPoints,r=e.rightPoints,o=e.fuzziness,i=t/(a+r+1),l=n/a,f=n/r,s={},h=[],u=function(e,t){return t?(e.c1x=t.x*o,e.c1y=t.y*o):(e.c1x=e.x,e.c1y=e.y),e.c2x=e.x*o,e.c2y=e.y*o,e},d=-a;d<=0;d++){var c=Math.round(d*i),g=Math.round((d+a)*-l);s[d]={type:"C",x:c,y:g},h.push(u(s[d],s[d-1]))}for(var p=1;p<=r;p++){var m=Math.round(p*i),y=-(r-p)*f;s[p]={type:"C",x:m,y:y},h.push(u(s[p],s[p-1]))}return h.push({type:"L",x:0,y:0}),h}},{key:"plantLine",value:function(e){for(var t=e.minHeight,n=e.maxHeight,a=e.pointsBetween,o=e.scale,i=e.flX,l=e.flY,f=e.flCX,s=o/a,h=n-t,u=[{type:"M",x:0,y:0}],d=1;d<a+1;d++){var c=(Math.random()-.5)*i,g=Math.random()*l,p=(Math.random()-.5)*f,m=s*d+c*s,y=r.getY(m)-t,x=u[u.length-1],b=h*g,v=Math.ceil(x.x+s*p),w=Math.ceil(x.y-b),S=Math.ceil(m+s*p),P=Math.ceil(y-b);u.push({type:"C",x:m,y:y,c1x:v,c1y:w,c2x:S,c2y:P})}return u.push({type:"L",x:o,y:r.getY(o)},{type:"L",x:0,y:0}),u}},{key:"field",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:240;if(this.cached.fields[e])return this.cached.fields[e];var t=[];return t[0]={type:"M",x:0,y:0},t[1]={type:"L",x:Math.ceil(e),y:Math.ceil(r.getY(e))},t[2]={type:"L",x:0,y:Math.ceil(2*t[1].y)},t[3]={type:"L",x:Math.ceil(-t[1].x),y:Math.ceil(t[1].y)},t[4]={type:"L",x:0,y:0},this.cached.fields[e]=t,t}}])&&f(t.prototype,n),a&&f(t,a),e}()),h={plantLines:{poplars:{lightShape:{fill:"0x008b68"},shadowShape:{fill:"0x37765b"}},willows:{lightShape:{fill:"0x008b68"},shadowShape:{fill:"0x37765b"}},gardenTrees:{lightShape:{fill:"0x008b68"},shadowShape:{fill:"0x37765b"}}},fields:{"0x777A7E":{furrow:["0x998675","0x778675"],bed:["0x998675","0x778675"]},"0x39A487":{grapes:["0x39B54A"]},"0x999569":{furrow:["0x998675","0x778675"],bed:["0x998675","0x778675"]},"0x777A6E":{grapes:["0x3e7648"],gardenTrees:["0x2f7662"]},"0x8CA499":{grapes:["0x39B56E"],gardenTrees:["0x008b68"]}}},u={plantLines:{poplars:{lightShape:{fill:"0x008b68"},shadowShape:{fill:"0x37765b"}},willows:{lightShape:{fill:"0x008b68"},shadowShape:{fill:"0x37765b"}},gardenTrees:{lightShape:{fill:"0x008b68"},shadowShape:{fill:"0x37765b"}}},fields:{"0x777A7E":{furrow:["0x998675","0x778675"],bed:["0x998675","0x778675"]},"0x39A487":{grapes:["0x39B54A"]},"0x999569":{furrow:["0x998675","0x778675"],bed:["0x998675","0x778675"]},"0x777A6E":{grapes:["0x3e7648"],gardenTrees:["0x2f7662"]},"0x8CA499":{grapes:["0x39B56E"],gardenTrees:["0x008b68"]}}},d={plantLines:{poplars:{quantity:12,lightShape:{minHeight:15,maxHeight:30,pointsBetween:40,flX:.33,flY:1,flCX:.2},shadowShape:{minHeight:5,maxHeight:20,pointsBetween:60,flX:.33,flY:1,flCX:1}},willows:{quantity:12,lightShape:{minHeight:10,maxHeight:20,pointsBetween:30,flX:.5,flY:1,flCX:1},shadowShape:{minHeight:4,maxHeight:15,pointsBetween:60,flX:.25,flY:1,flCX:1}},gardenTrees:{quantity:16,lightShape:{minHeight:4,maxHeight:12,pointsBetween:30,flX:.25,flY:1,flCX:.25},shadowShape:{minHeight:2,maxHeight:8,pointsBetween:60,flX:.25,flY:1,flCX:.25}},grapes:{quantity:20,lightShape:{minHeight:4,maxHeight:10,pointsBetween:30,flX:.5,flY:.75,flCX:.5},shadowShape:{minHeight:2,maxHeight:4,pointsBetween:60,flX:.25,flY:1,flCX:.5}},bed:{quantity:30,lightShape:{minHeight:2,maxHeight:5,pointsBetween:20,flX:.5,flY:1,flCX:.1},shadowShape:{minHeight:1,maxHeight:4,pointsBetween:40,flX:.25,flY:1,flCX:.1}},furrow:{quantity:0,lightShape:{minHeight:2,maxHeight:3,pointsBetween:20,flX:.5,flY:1,flCX:0}}}};function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r.toFrontalCoords(t*a,n*a);return c({scale:a,coords:{x:t,y:n},frontalCoords:{x:o.x,y:o.y}},e.getRandomBiomPreset(a))};g(p,"getRandomBiomPreset",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"summer",n=p.getColorPresetsBy(t),a=p.getRandomFieldPreset(n,e);return{field:a,fieldPlants:p.getRandomFieldPlantsPreset(n,a.id,e),borderLineX:p.getRandomBorderLinePreset(n,e),borderLineY:p.getRandomBorderLinePreset(n,e,!0),cloud:p.getCloud(e)}}),g(p,"getRandomFieldId",function(e){return l.getRandomPropertyName(e.fields)}),g(p,"getRandomPlantName",function(e,t){return l.getRandomPropertyName(e.fields[t])}),g(p,"getRandomFieldPlantColor",function(e,t,n){var a=e.fields[t][n];return l.getRandomArrayItem(a)}),g(p,"getBorderLineColors",function(e,t){return e.plantLines[t]}),g(p,"getRandomFieldPreset",function(e,t){var n=p.getRandomFieldId(e);return{id:n,color:n,shape:s.field(t)}}),g(p,"getAverage",function(e,t){return e/t}),g(p,"getRandomFieldPlantsPreset",function(e,t,n){var a=p.getRandomPlantName(e,t);return{name:a,lightColor:p.getRandomFieldPlantColor(e,t,a),shapes:p.getRandomFieldPlantsShapes(a,n),reflected:l.getRandomBool()}}),g(p,"getRandomFieldPlantsShapes",function(e,t){for(var n=d.plantLines[e],a=n.quantity,o=n.lightShape,i=[],l=p.getAverage(t,a),f=1;f<=a;f++){var s={x:-l*f+1,y:r.getY(l*f+1)};i.push(p.getRandomFieldPlantLineShapes({lightShape:o,frontalCoords:s,scale:t}))}return i}),g(p,"getRandomBorderLinePreset",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=l.getRandomPropertyName(e.plantLines),r=d.plantLines[a],o=r.lightShape,i=r.shadowShape,f=p.getBorderLineColors(e,a);return{name:a,lightColor:f.lightShape.fill,shadowColor:f.shadowShape.fill,shapes:p.getRandomFieldPlantLineShapes({lightShape:o,shadowShape:i,scale:t}),reflected:n}}),g(p,"getRandomFieldPlantLineShapes",function(e){var t=e.lightShape,n=e.shadowShape,a=e.frontalCoords,r=e.scale,o=null,i=null;return t&&(t.scale=r,o=s.plantLine(p.normalizeShapeScale(t))),n&&(n.scale=r,i=s.plantLine(p.normalizeShapeScale(n))),{frontalCoords:a,lightShape:o,shadowShape:i}}),g(p,"getCloud",function(e){if(l.getRandomBoolByChance(50)){var t=e+e/2*Math.random(),n=r.getY(e),a=n/3+n/3*Math.random(),o=l.getRandomArrayItem([3,4,5,6,7]),i=l.getRandomArrayItem([3,4,5]),f=1.2+.2*Math.random();return{d:s.cloud({width:t,height:a,leftPoints:o,rightPoints:i,fuzziness:f}),fill:13434879}}return null}),g(p,"normalizeShapeScale",function(e){var t=e.scale/250;return c({},e,{minHeight:e.minHeight*t,maxHeight:e.maxHeight*t})}),g(p,"getColorPresetsBy",function(e){switch(e){case"summer":return c({},h);case"winter":return c({},u);default:return c({},h)}});var m=p;self.addEventListener("message",function(e){let{x:t,y:n,scale:a,key:r}=e.data;const o=new m(t,n,a);this.postMessage({key:r,biomPreset:o})})}]);